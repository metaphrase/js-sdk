!function(){var a=function(a){a="undefined"!=typeof a?a:{},["projectId","API_KEY"].forEach(function(b){if(!a.hasOwnProperty(b))throw"Parameter "+b+" is required!"}),this.parameters={projectId:null,language:"en",API_KEY:null,onLoad:null,cacheType:null,cacheTTL:36e5,reportMissingKeys:!1},this.API_BASE="https://translate.nohponex.gr/";for(var b in a)a.hasOwnProperty(b)&&this.parameters.hasOwnProperty(b)&&(this.parameters[b]=a[b]);this.language=this.parameters.language,this.missingKeys=[],this.translation=[];var c=this.API_BASE+"fetch/listing/?id="+this.parameters.projectId+"&language="+this.language+"&api_key="+this.parameters.API_KEY,d="undefined"!=typeof sessionStorage?sessionStorage.getItem(c):null;if(d||"undefined"==typeof localStorage||(d=localStorage.getItem(c)),d)try{if(d=JSON.parse(d),!d.date)throw"date not set";var e=new Date-new Date(d.date);e<this.parameters.cacheTTL?(this.language=d.language,this.translation=d.translation,console.log("from cache..")):(localStorage.removeItem(c),sessionStorage.removeItem(c),d=null)}catch(f){d=null}var g=this;d?g.metaphrasePage():this.fetch(function(){g.metaphrasePage()})};a.prototype.fetch=function(a){var b=this,c=new XMLHttpRequest;c.open("GET",this.API_BASE+"fetch/listing/?id="+this.parameters.projectId+"&language="+this.parameters.language+"&api_key="+this.parameters.API_KEY,!0),c.onload=function(){c.status>=200&&c.status<400&&(b.translation=JSON.parse(c.responseText).translation,a&&a())},c.onerror=function(){},c.send()},a.prototype.metaphrasePage=function(a){a="undefined"!=typeof a?a:document;var b=this,c=a.querySelectorAll("[data-i18]");[].forEach.call(c,function(a,c){var d=a.getAttribute("data-i18");if(d){var e=null;a.getAttribute("data-i18-data")&&(e=JSON.parse(a.getAttribute("data-i18-data")));var f=b.metaphraseKeyword(d,e);f?a.innerHTML=f:a.innerHTML||(elinnerHTML=d)}}),c=a.querySelectorAll("[data-i18-title]"),[].forEach.call(c,function(a,c){var d=a.getAttribute("data-i18-title");if(d){var e=b.metaphraseKeyword(d);e?a.setAttribute("title",e):a.getAttribute("title")||a.setAttribute("title",d)}})},a.prototype.metaphraseKeyword=function(a,b){b="undefined"!=typeof b?b:null;var c=this.translation[a];if(!c)return this.missingKeys.indexOf(a)<0&&(this.missingKeys.push(a),this.addKey(a)),null;if(b)for(var d in b)b.hasOwnProperty(d)&&(c=c.replace("%"+d+"%",b[d]));return c},a.prototype.addKey=function(a,b){},"undefined"==typeof window?exports.metaphrase=a:window.metaphrase=a}();